const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CXoXQEp-.js","./6wy3AQI5.js","./entry.hDcDTH1A.css"])))=>i.map(i=>d[i]);
import{a1 as O,I as _}from"./6wy3AQI5.js";const j=/\d/,R=["-","_","/","."];function D(e=""){if(!j.test(e))return e!==e.toLowerCase()}function E(e,s){const r=R,i=[];if(!e||typeof e!="string")return i;let n="",t,a;for(const l of e){const o=r.includes(l);if(o===!0){i.push(n),n="",t=void 0;continue}const c=D(l);if(a===!1){if(t===!1&&c===!0){i.push(n),n=l,t=c;continue}if(t===!0&&c===!1&&n.length>1){const f=n.at(-1);i.push(n.slice(0,Math.max(0,n.length-1))),n=f+l,t=c;continue}}n+=l,t=c,a=o}return i.push(n),i}function U(e){return e?e[0].toUpperCase()+e.slice(1):""}function W(e,s){return e?(Array.isArray(e)?e:E(e)).map(r=>U(s!=null&&s.normalize?r.toLowerCase():r)).join(""):""}function z(e,s){return e?(Array.isArray(e)?e:E(e)).map(r=>r.toLowerCase()).join("-"):""}const J={posts:"p5kVHk9nNi"},k={posts:"_content_posts",info:"_content_info"},X={posts:{jsonFields:["meta","seo","body","navigation","tags","related"]},info:{jsonFields:[]}},y=(e,s)=>{const r=e._conditions;return r.length>0?`(${r.join(` ${s} `)})`:""},$=e=>{const s=[],r={_conditions:s,where(i,n,t){let a;switch(n.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(t)){const l=t.map(o=>`'${o}'`).join(", ");a=`"${String(i)}" ${n.toUpperCase()} (${l})`}else throw new TypeError(`Value for ${n} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(t)&&t.length===2)a=`"${String(i)}" ${n.toUpperCase()} '${t[0]}' AND '${t[1]}'`;else throw new Error(`Value for ${n} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":a=`"${String(i)}" ${n.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":a=`"${String(i)}" ${n.toUpperCase()} '${t}'`;break;default:a=`"${String(i)}" ${n} '${t}'`}return s.push(`${a}`),r},andWhere(i){const n=i($());return s.push(y(n,"AND")),r},orWhere(i){const n=i($());return s.push(y(n,"OR")),r}};return r},B=(e,s)=>{const r={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[]},i={andWhere(t){const a=t($());return r.conditions.push(y(a,"AND")),i},orWhere(t){const a=t($());return r.conditions.push(y(a,"OR")),i},path(t){return i.where("path","=",O(t))},skip(t){return r.offset=t,i},where(t,a,l){return i.andWhere(o=>o.where(String(t),a,l)),i},limit(t){return r.limit=t,i},select(...t){return t.length&&r.selectedFields.push(...t),i},order(t,a){return r.orderBy.push(`"${String(t)}" ${a}`),i},async all(){return s(e,n()).then(t=>t||[])},async first(){return s(e,n({limit:1})).then(t=>t[0]||null)},async count(t="*",a=!1){return s(e,n({count:{field:String(t),distinct:a}})).then(l=>l[0].count)}};function n(t={}){let a="SELECT ";if(t!=null&&t.count)a+=`COUNT(${t.count.distinct?"DISTINCT":""} ${t.count.field}) as count`;else{const o=Array.from(new Set(r.selectedFields));a+=o.length>0?o.map(c=>`"${String(c)}"`).join(", "):"*"}a+=` FROM ${k[String(e)]}`,r.conditions.length>0&&(a+=` WHERE ${r.conditions.join(" AND ")}`),r.orderBy.length>0?a+=` ORDER BY ${r.orderBy.join(", ")}`:a+=" ORDER BY stem ASC";const l=(t==null?void 0:t.limit)||r.limit;return l>0&&(r.offset>0?a+=` LIMIT ${l} OFFSET ${r.offset}`:a+=` LIMIT ${l}`),a}return i};function P(){const e=[{name:"start",time:performance.now()}];return{tick(s){e.push({name:s,time:performance.now()})},end(s){const r=e.reduce((i,n,t)=>(t>0&&i.push(`-- ${n.name}: ${(n.time-e[t-1].time).toPrecision(4)}ms
`),i),[]);return`${s}: ${(e[e.length-1].time-e[0].time).toPrecision(4)}ms
${r.join("")}`}}}async function q(e,s=[]){const r=await e.order("stem","ASC").orWhere(o=>o.where("navigation","<>","false").where("navigation","IS NULL")).select("navigation","stem","path","title","meta",...s||[]).all(),{contents:i,configs:n}=r.reduce((o,c)=>{var f;if(String(c.stem).split("/").pop()===".navigation"){c.title=((f=c.title)==null?void 0:f.toLowerCase())==="navigation"?"":c.title;const h=c.path.split("/").slice(0,-1).join("/")||"/";o.configs[h]={...c,...c.body}}else o.contents.push(c);return o},{configs:{},contents:[]}),t=o=>({...b(["title",...s])(o),...o.meta,...v(o==null?void 0:o.navigation)?o.navigation:{}}),a=o=>({...b(["title",...s])(o),...v(o==null?void 0:o.navigation)?o.navigation:{}}),l=i.reduce((o,c)=>{var I;const f=c.path.substring(1).split("/"),h=c.stem.split("/"),A=!!((I=h[h.length-1])!=null&&I.match(/([1-9]\d*\.)?index/g)),C=u=>({title:u.title,path:u.path,stem:u.stem,children:[],...a(u)}),d=C(c);if(A){const u=n[d.path];if(typeof(u==null?void 0:u.navigation)<"u"&&(u==null?void 0:u.navigation)===!1)return o;if(c.path!=="/"){const S=C(c);d.children.push(S)}u&&Object.assign(d,t(u))}return f.length===1?(o.push(d),o):(f.slice(0,-1).reduce((u,S,L)=>{const w="/"+f.slice(0,L+1).join("/"),p=n[w];if(typeof(p==null?void 0:p.navigation)<"u"&&p.navigation===!1)return[];let g=u.find(m=>m.path===w);if(!g){const m=p?t(p):{};g={...m,title:m.title||M(S),path:w,stem:h.join("/"),children:[],page:!1},u.push(g)}return g.children},o).push(d),o)},[]);return N(l)}const F=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});function N(e){var r;const s=e.sort((i,n)=>F.compare(i.stem,n.stem));for(const i of s)(r=i.children)!=null&&r.length?N(i.children):delete i.children;return e}function b(e){return s=>(s=s||{},e&&e.length?e.filter(r=>typeof s[r]<"u").reduce((r,i)=>Object.assign(r,{[i]:s[i]}),{}):s)}function v(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}const M=e=>e.split(/[\s-]/g).map(W).join(" ");async function x(e,s,r){const{before:i=1,after:n=1,fields:t=[]}={},a=await q(e,t),l=T(a),o=l.findIndex(h=>h.path===s),c=o===-1?[]:l.slice(o-i,o),f=o===-1?[]:l.slice(o+1,o+n+1);return[...Array.from({length:i}).fill(null).concat(c).slice(c.length),...f.concat(Array.from({length:n}).fill(null)).slice(0,n)]}function T(e){return e.flatMap(r=>{const i=r.children?T(r.children):[];return r.page===!1||i.length&&i.find(n=>n.path===r.path)?i:[{...r,children:void 0},...i]})}const Q=e=>B(e,(s,r)=>V(s,r));function Z(e,s,r){return G(e,i=>x(i,s))}async function V(e,s){return H(e,s)}async function H(e,s){const r=P(),i=await _(()=>import("./CXoXQEp-.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(n=>n.loadDatabaseAdapter(e)).then(n=>n.all(s));return r.tick("Execute Query"),console.log(r.end("Run with Compressed Dump")),i}function G(e,s){const r=Q(e),i={where(n,t,a){return r.where(String(n),t,a),i},andWhere(n){return r.andWhere(n),i},orWhere(n){return r.orWhere(n),i},order(n,t){return r.order(String(n),t),i},then(n,t){return s(r).then(n,t)},catch(n){return this.then(void 0,n)},finally(n){return this.then(void 0,void 0).finally(n)},get[Symbol.toStringTag](){return"Promise"}};return i}export{Q as a,X as b,J as c,z as k,P as m,W as p,Z as q,k as t};
